<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do App</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        #todo-list {
            max-width: 500px;
        }

        #todo-list>li {
            display: flex;
            justify-content: space-between;
        }

        .dltBtn {
            margin-left: auto;
        }
    </style>
</head>

<body>

    <div class="container">
        <h1>My to do list</h1>
        <input type="text" name="text" id="text" placeholder="add a new to-do">
        <button id="add">add</button>
        <ul id="todo-list">
        </ul>
    </div>

    <script>
        const inputbox = document.getElementById("text");
        const add = document.getElementById("add");
        const todoList = document.getElementById("todo-list");

        const addTodo = () => {

            const inputText = inputbox.value.trim();
            if (inputText.length === 0) {
                alert("Type something..");
                return; // return must!
            }

            //create list tag
            const li = document.createElement("li");

            // text span
            const span = document.createElement("span");
            span.textContent = inputText;
            li.appendChild(span);

            //create delete button
            const deleteBtn = document.createElement("button");
            deleteBtn.textContent = "delete";
            deleteBtn.classList.add("dltBtn");
            li.appendChild(deleteBtn);

            //create edit button
            const editBtn = document.createElement("button");
            editBtn.textContent = "edit";
            li.appendChild(editBtn);

            todoList.appendChild(li);
            inputbox.value = "";
        };

        const updateTodo = (val) => {
            const btnClicked = val.target.textContent;

            // delete
            if (btnClicked === "delete") {
                todoList.removeChild(val.target.parentElement);
            }

            // edit
            if (btnClicked === "edit") {
                const li = val.target.parentElement;
                const span = li.querySelector("span");
                const oldText = span.textContent;

                // Input box replace
                const input = document.createElement("input");
                input.type = "text";
                input.value = oldText;

                // Replace span with input
                li.replaceChild(input, span);

                // Change edit button to save
                val.target.textContent = "save";

            }

            // save after edit
            if (btnClicked === "save") {
                const li = val.target.parentElement;
                const input = li.querySelector("input");
                const newText = input.value.trim();

                if (newText.length === 0) {
                    alert("Cannot be empty!");
                    return;
                }

                const span = document.createElement("span");
                span.textContent = newText;

                // Replace input with span
                li.replaceChild(span, input);

                // Change save button to edit
                val.target.textContent = "edit";
            }
        };

        add.addEventListener("click", addTodo);
        todoList.addEventListener("click", updateTodo);
    </script>
</body>

</html>